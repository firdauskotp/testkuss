<!DOCTYPE html>
<html lang="en" class=""> {# JS will add data-theme='dark' here #}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Kuss Essentials{% endblock %}</title>
    <link href="{{ url_for('static', filename='css/output.css') }}" rel="stylesheet">
    {% block head_extra %}{% endblock %}
</head>
<body class="font-sans antialiased bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 flex flex-col min-h-screen">

    <header class="bg-gray-800 dark:bg-gray-900 text-white shadow-md">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="/" class="text-xl font-bold hover:text-gray-300">
                Kuss Essentials {# Placeholder for logo/site name #}
            </a>
            <div class="flex items-center space-x-3">
                <nav class="hidden md:flex space-x-4">
                    <a href="{{ url_for('dashboard') }}" class="hover:text-gray-300">Dashboard</a>
                    {# Add other main navigation links here as needed #}
                    <a href="#" class="hover:text-gray-300">Profile</a>
                    <a href="{{ url_for('logout') }}" class="hover:text-gray-300">Logout</a>
                </nav>
                <button id="theme-toggle-btn" class="p-2 rounded-md hover:bg-gray-700 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500">
                    {# Icon will be handled by JS or CSS later, for now, text #}
                    Theme
                </button>
                <button id="mobile-menu-btn" class="md:hidden p-2 rounded-md hover:bg-gray-700 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                </button>
            </div>
        </div>
        <!-- Mobile Menu (hidden by default) -->
        <div id="mobile-menu" class="hidden md:hidden px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-gray-800 dark:bg-gray-900">
            <a href="{{ url_for('dashboard') }}" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-gray-700 dark:hover:bg-gray-700">Dashboard</a>
            <a href="#" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-gray-700 dark:hover:bg-gray-700">Profile</a>
            <a href="{{ url_for('logout') }}" class="block px-3 py-2 rounded-md text-base font-medium hover:bg-gray-700 dark:hover:bg-gray-700">Logout</a>
        </div>
    </header>

    <main class="container mx-auto p-4 flex-grow">
        <h1 class="text-2xl font-bold my-4">{% block page_title %}{% endblock %}</h1>
        {% block content %}{% endblock %}
    </main>

    <footer class="bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 p-6 mt-auto text-center text-sm">
        <p>&copy; <span id="current-year">2024</span> Kuss Essentials. All rights reserved.</p>
        {# You can add more footer links here if needed #}
    </footer>

    <script src="{{ url_for('static', filename='js/theme-toggle.js') }}"></script>
    <script>
        // Basic mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
        }

        // Update theme button text/icon based on theme (example)
        const themeToggleBtn = document.getElementById('theme-toggle-btn');
        function updateToggleButtonText() {
            if (themeToggleBtn) {
                const currentTheme = document.documentElement.getAttribute('data-theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
                themeToggleBtn.textContent = currentTheme === 'dark' ? 'Light' : 'Dark';
            }
        }
        // Update on load
        updateToggleButtonText();
        // Update when theme changes (listen to custom event or override in theme-toggle.js)
        // For simplicity, theme-toggle.js already updates it. If not, you'd call updateToggleButtonText() after theme change.
        // We might need to enhance theme-toggle.js to emit an event or allow callback.
        // For now, theme-toggle.js directly updates button text.

        // Current year in footer
        // document.getElementById('current-year').textContent = new Date().getFullYear(); // This can be uncommented if preferred over static year
    </script>
    {% block scripts %}{% endblock %}
</body>
</html>
