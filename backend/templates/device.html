<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Records</title>
  <link rel="icon" href="{{ url_for('static', filename='logo.jpg') }}" type="image/x-icon">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
    <div class="container mt-4">
        <h2>Device Records</h2>
        
        <!-- Filter Form -->
        <form class="mb-4" method="get" action="/view-device">
            <div class="accordion" id="filterAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#filterContent">
                            Filter
                        </button>
                    </h2>
                    <div id="filterContent" class="accordion-collapse collapse">
                        <div class="accordion-body">
                            <div class="row">
                                <div class="col-md-3">
                                    <label for="company" class="form-label">Company</label>
                                    <input type="text" id="company" name="company" class="form-control" placeholder="Company A">
                                </div>
                                <div class="col-md-3">
                                    <label for="tied_to_premise" class="form-label">Tied to Premise</label>
                                    <input type="text" id="tied_to_premise" name="tied_to_premise" class="form-control" placeholder="Premise A">
                                </div>
                                <div class="col-md-3">
                                    <label for="location" class="form-label">Location</label>
                                    <input type="text" id="location" name="location" class="form-control" placeholder="Toilet">
                                </div>
                                <div class="col-md-3">
                                    <label for="sn" class="form-label">Serial Number</label>
                                    <input type="number" id="sn" name="sn" class="form-control" placeholder="123">
                                </div>
                                <div class="col-md-3">
                                    <label for="model" class="form-label">Model</label>
                                    <input type="text" id="model" name="model" class="form-control" placeholder="VOX">
                                </div>
                                <div class="col-md-3">
                                    <label for="color" class="form-label">Color</label>
                                    <input type="text" id="color" name="color" class="form-control" placeholder="B">
                                </div>
                                <div class="col-md-3">
                                    <label for="current_eo" class="form-label">Current EO</label>
                                    <input type="text" id="current_eo" name="current_eo" class="form-control" placeholder="Black Opium">
                                </div>
                                <!-- E1 Fields -->
                                <div class="col-md-3">
                                    <label for="e1_days" class="form-label">E1 Days</label>
                                    <input type="text" id="e1_days" name="e1_days" class="form-control" placeholder="E1 Days">
                                </div>
                                <div class="col-md-3">
                                    <label for="e1_start" class="form-label">E1 Start</label>
                                    <input type="text" id="e1_start" name="e1_start" class="form-control" placeholder="E1 Start">
                                </div>
                                <div class="col-md-3">
                                    <label for="e1_end" class="form-label">E1 End</label>
                                    <input type="text" id="e1_end" name="e1_end" class="form-control" placeholder="E1 End">
                                </div>
                                <div class="col-md-3">
                                    <label for="e1_pause" class="form-label">E1 Pause</label>
                                    <input type="number" id="e1_pause" name="e1_pause" class="form-control" placeholder="E1 Pause">
                                </div>
                                <div class="col-md-3">
                                    <label for="e1_work" class="form-label">E1 Work</label>
                                    <input type="number" id="e1_work" name="e1_work" class="form-control" placeholder="E1 Work">
                                </div>
                                <!-- Repeat similar input fields for E2, E3, E4 -->
                                <div class="col-md-3">
                                    <label for="e2_days" class="form-label">E2 Days</label>
                                    <input type="text" id="e2_days" name="e2_days" class="form-control" placeholder="E2 Days">
                                </div>
                                <div class="col-md-3">
                                    <label for="e2_start" class="form-label">E2 Start</label>
                                    <input type="text" id="e2_start" name="e2_start" class="form-control" placeholder="E2 Start">
                                </div>
                                <div class="col-md-3">
                                    <label for="e2_end" class="form-label">E2 End</label>
                                    <input type="text" id="e2_end" name="e2_end" class="form-control" placeholder="E2 End">
                                </div>
                                <div class="col-md-3">
                                    <label for="e2_pause" class="form-label">E2 Pause</label>
                                    <input type="number" id="e2_pause" name="e2_pause" class="form-control" placeholder="E2 Pause">
                                </div>
                                <div class="col-md-3">
                                    <label for="e2_work" class="form-label">E2 Work</label>
                                    <input type="number" id="e2_work" name="e2_work" class="form-control" placeholder="E2 Work">
                                </div>
                                <div class="col-md-3">
                                    <label for="e3_days" class="form-label">E3 Days</label>
                                    <input type="text" id="e3_days" name="e3_days" class="form-control" placeholder="E3 Days">
                                </div>
                                <div class="col-md-3">
                                    <label for="e3_start" class="form-label">E3 Start</label>
                                    <input type="text" id="e3_start" name="e3_start" class="form-control" placeholder="E3 Start">
                                </div>
                                <div class="col-md-3">
                                    <label for="e3_end" class="form-label">E3 End</label>
                                    <input type="text" id="e3_end" name="e3_end" class="form-control" placeholder="E3 End">
                                </div>
                                <div class="col-md-3">
                                    <label for="e3_pause" class="form-label">E3 Pause</label>
                                    <input type="number" id="e3_pause" name="e3_pause" class="form-control" placeholder="E3 Pause">
                                </div>
                                <div class="col-md-3">
                                    <label for="e3_work" class="form-label">E3 Work</label>
                                    <input type="number" id="e3_work" name="e3_work" class="form-control" placeholder="E3 Work">
                                </div>
                                <div class="col-md-3">
                                    <label for="e4_days" class="form-label">E4 Days</label>
                                    <input type="text" id="e4_days" name="e4_days" class="form-control" placeholder="E4 Days">
                                </div>
                                <div class="col-md-3">
                                    <label for="e4_start" class="form-label">E4 Start</label>
                                    <input type="text" id="e4_start" name="e4_start" class="form-control" placeholder="E4 Start">
                                </div>
                                <div class="col-md-3">
                                    <label for="e4_end" class="form-label">E4 End</label>
                                    <input type="text" id="e4_end" name="e4_end" class="form-control" placeholder="E4 End">
                                </div>
                                <div class="col-md-3">
                                    <label for="e4_pause" class="form-label">E4 Pause</label>
                                    <input type="number" id="e4_pause" name="e4_pause" class="form-control" placeholder="E4 Pause">
                                </div>
                                <div class="col-md-3">
                                    <label for="e4_work" class="form-label">E4 Work</label>
                                    <input type="number" id="e4_work" name="e4_work" class="form-control" placeholder="E4 Work">
                                </div>
                                <!-- ... Continue similar input fields for E2, E3, E4 -->
                                <div class="col-md-3">
                                    <label for="month" class="form-label">Month</label>
                                    <input type="text" id="month" name="month" class="form-control" placeholder="Month">
                                </div>
                                <div class="col-md-3">
                                    <label for="year" class="form-label">Year</label>
                                    <input type="number" id="year" name="year" class="form-control" placeholder="Year">
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary mt-3">Filter</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>

        <!-- Device Table -->
        <div class="table-responsive">

        <table class="table table-striped table-bordered">
        
            <thead class="table-dark">
                <tr>
                    <th>Company</th>
                    <th>Tied to Premise</th>
                    <th>Serial Number</th>
                    <th>Model</th>
                    <th>Color</th>
                    <th>Current EO</th>
                    <th>E1 Days</th>
                    <th>E1 Start</th>
                    <th>E1 End</th>
                    <th>E1 Pause</th>
                    <th>E1 Work</th>
                    <th>E2 Days</th>
                    <th>E2 Start</th>
                    <th>E2 End</th>
                    <th>E2 Pause</th>
                    <th>E2 Work</th>
            <th>E3 Days</th>
            <th>E3 Start</th>
            <th>E3 End</th>
            <th>E3 Pause</th>
            <th>E3 Work</th>
            <th>E4 Days</th>
            <th>E4 Start</th>
            <th>E4 End</th>
            <th>E4 Pause</th>
            <th>E4 Work</th>
            <th>Month</th>
            <th>Year</th>
        </tr>
            </thead>
            <tbody>
                {% for device in data %}
                <tr>
                    <td>{{ device.company }}</td>
            <td>{{ device.tied_to_premise }}</td>
            <td>{{ device.sn }}</td>
            <td>{{ device.model }}</td>
            <td>{{ device.color }}</td>
            <td>{{ device.current_eo }}</td>
            <td>{{ device.e1_days }}</td>
            <td>{{ device.e1_start }}</td>
            <td>{{ device.e1_end }}</td>
            <td>{{ device.e1_pause }}</td>
            <td>{{ device.e1_work }}</td>
            <td>{{ device.e2_days }}</td>
            <td>{{ device.e2_start }}</td>
            <td>{{ device.e2_end }}</td>
            <td>{{ device.e2_pause }}</td>
            <td>{{ device.e2_work }}</td>
            <td>{{ device.e3_days }}</td>
            <td>{{ device.e3_start }}</td>
            <td>{{ device.e3_end }}</td>
            <td>{{ device.e3_pause }}</td>
            <td>{{ device.e3_work }}</td>
            <td>{{ device.e4_days }}</td>
            <td>{{ device.e4_start }}</td>
            <td>{{ device.e4_end }}</td>
            <td>{{ device.e4_pause }}</td>
            <td>{{ device.e4_work }}</td>
                    <td>{{ device.created_at_month }}</td>
                    <td>{{ device.created_at_year }}</td>
                    
                </tr>

                <!-- Edit Modal -->
                
                {% endfor %}
            </tbody>
        </table></div>

        <!-- Pagination -->
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center mt-4">
                <!-- Previous Button -->
                <li class="page-item {% if page == 1 %}disabled{% endif %}">
                    <a class="page-link" 
                       href="{{ pagination_base_url }}{{ query_params | to_querystring | update_querystring('page', page - 1) }}" 
                       aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
        
                <!-- First Page and Ellipsis -->
                {% if page > 3 %}
                <li class="page-item">
                    <a class="page-link" 
                    href="{{ pagination_base_url }}{{ query_params | to_querystring | update_querystring('page', 1) }}">1</a>
                </li>
                <li class="page-item disabled d-none d-sm-inline">
    <span class="page-link">...</span>                </li>
                {% endif %}
    
                <!-- Dynamic Page Numbers -->
                {% for p in range(max(1, page - 2), min(total_pages + 1, page + 3)) %}
                <li class="page-item {% if p == page %}active{% endif %} d-none d-sm-inline">
                    <a class="page-link" 
                    href="{{ pagination_base_url }}{{ query_params | to_querystring | update_querystring('page', p) }}">
                        {{ p }}
                    </a>
                </li>
                {% endfor %}
    
                <!-- Ellipsis and Last Page -->
                {% if page < total_pages - 3 %}
                <li class="page-item disabled d-none d-sm-inline">
                    <span class="page-link">...</span>
                </li>
                <li class="page-item">
                    <a class="page-link" 
                    href="{{ pagination_base_url }}{{ query_params | to_querystring | update_querystring('page', total_pages) }}">
                        {{ total_pages }}
                    </a>
                </li>
                {% endif %}
        
                <!-- Next Button -->
                <li class="page-item {% if page == total_pages %}disabled{% endif %}">
                    <a class="page-link" 
                       href="{{ pagination_base_url }}{{ query_params | to_querystring | update_querystring('page', page + 1) }}" 
                       aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
